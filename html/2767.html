<meta http-equiv="content-type" content="text/html; charset=UTF-8"><html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<link href="include/hoj.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<center>
<div style="width:90%; text-align:left">
<img src="image/image_logo_png"/>
</div>
<table width="96%">
<tr align="center" class="hd" valign="top">
<th><a href="faqs.php">F.A.Qs</a></th>
<th><a href="./">Home</a></th>
<th><a href="./bbs.php">Discuss</a></th>
<th><a href="./problemset.php">ProblemSet</a></th>
<th><a href="./status.php">Status</a></th>
<th><a href="./ranklist.php">Ranklist</a></th>
<th><a href="./contest.php">Contest</a></th>
<th><a href="./modifypage.php"><b>ModifyUser</b></a>  <a href="userinfo.php?user=free_bzoj">
<font color="red">free_bzoj</font></a></th><th><a href="logout.php">Logout</a></th> <th><a href="./donation.php"><font color="red">捐赠本站</font></a></th>
</tr>
</table>
</center>
<center>
<div class="notice">
<div>
<b>Notice:</b>1:由于本OJ建立在Linux平台下，而许多题的数据在Windows下制作，请注意输入、输出语句及数据类型及范围，避免无谓的RE出现。
2:本站即将推出针对初学者的试题系统(与目前OJ是分开的，互不影响)，内容覆盖从语法入门到NOI的所有知识点，敬请关注。
	</div>
</div>
</center>
<title>Problem 2767. -- [JLOI2010]足彩投注   </title><center><h2>2767: [JLOI2010]足彩投注   </h2><span class="green">Time Limit: </span>10 Sec  <span class="green">Memory Limit: </span>128 MB<br/><span class="green">Submit: </span>86  <span class="green">Solved: </span>38<br/>[<a href="submitpage.php?id=2767">Submit</a>][<a href="problemstatus.php?id=2767">Status</a>][<a href="bbs.php?id=2767">Discuss</a>]</center><h2>Description</h2><div class="content"><p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: medium"><span lang="EN-US"><span style="mso-spacerun: yes"><font face="Times New Roman">  </font></span></span><span style="font-family: 仿宋_GB2312; mso-ascii-font-family: 'Times New Roman'">南非世界杯离我们越来越近了，与足球有紧密联系的</span><span style="font-family: 仿宋_GB2312">足球彩票也越来越引起了人们的强烈关注。</span></span><span lang="EN-US" style="font-size: 12pt"><o:p></o:p></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: medium"><span lang="EN-US"><span style="mso-spacerun: yes"><font face="Times New Roman">   </font></span></span><span lang="EN-US" style="font-family: 仿宋_GB2312"><span style="mso-spacerun: yes"> </span></span><span style="font-family: 仿宋_GB2312">了解足球彩票的人可能知道，足球彩票中有一种游戏叫做“胜负彩”，意为猜比赛的胜负。下面是一些与胜负彩有关的术语：</span></span><span style="font-size: 12pt; font-family: 仿宋_GB2312"><span lang="EN-US"><o:p></o:p></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: medium"><span lang="EN-US" style="font-family: 仿宋_GB2312"><span style="mso-spacerun: yes">    </span></span><b style="mso-bidi-font-weight: normal"><span style="font-family: 仿宋_GB2312">注<span lang="EN-US"><span style="mso-spacerun: yes">      </span></span></span></b><span style="font-family: 仿宋_GB2312">：每一组有效组合数据。</span></span><span style="font-size: 12pt; font-family: 仿宋_GB2312"><span lang="EN-US"><o:p></o:p></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: medium"><span lang="EN-US" style="font-family: 仿宋_GB2312"><span style="mso-spacerun: yes">    </span></span><b style="mso-bidi-font-weight: normal"><span style="font-family: 仿宋_GB2312">投<span lang="EN-US"><span style="mso-spacerun: yes">    </span></span>注</span></b><span style="font-family: 仿宋_GB2312">：彩民以现金购买足球彩票的行为。</span></span><span style="font-size: 12pt; font-family: 仿宋_GB2312"><span lang="EN-US"><o:p></o:p></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt"><span style="font-size: medium"><b style="mso-bidi-font-weight: normal"><span style="font-family: 仿宋_GB2312">单式投注</span></b><span style="font-family: 仿宋_GB2312">：彩民对于所有球队的比赛成绩均只选择一种预测结果的投注方式。投注的数量（注数）为<span lang="EN-US">1</span>。</span></span><span style="font-size: 12pt; font-family: 仿宋_GB2312"><span lang="EN-US"><o:p></o:p></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt"><span style="font-size: medium"><b style="mso-bidi-font-weight: normal"><span style="font-family: 仿宋_GB2312">复式投注</span></b><span style="font-family: 仿宋_GB2312">：彩民对于某些场次的比赛成绩选择两种以上的预测结果的投注方式。投注的数量为复式投注的组合数。例如，某彩民对一场比赛预测了两个结果（例如，胜平），另一场比赛预测了三个结果（胜负平），其他比赛都只预测了一种结果，那么注数就是<span lang="EN-US">2</span></span><span lang="EN-US" style="mso-ascii-font-family: 仿宋_GB2312; mso-fareast-font-family: 仿宋_GB2312"><font face="Times New Roman">×</font></span><span lang="EN-US" style="font-family: 仿宋_GB2312">3 = 6</span><span style="font-family: 仿宋_GB2312">。这样的一个复式投注，可以看成一个包含六种单式投注的集合。</span></span><span style="font-size: 12pt; font-family: 仿宋_GB2312"><span lang="EN-US"><o:p></o:p></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: medium"><span lang="EN-US" style="font-family: 仿宋_GB2312"><span style="mso-spacerun: yes">    </span></span><span style="font-family: 仿宋_GB2312">胜负彩的玩法一般是这样的。彩票机构指定一轮比赛中的若干场，让彩民去猜每场比赛的结果（胜、负、平）。根据彩民猜中比赛的场次，来确定中奖的额度。</span></span><span lang="EN-US" style="font-size: 12pt"><o:p></o:p></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt"><span style="font-size: medium"><span style="font-family: 仿宋_GB2312">我们现在考虑一个简化的模型。对于一轮比赛，彩民需要竞猜其中<i style="mso-bidi-font-style: normal"><span lang="EN-US">n</span></i>场比赛的结果，每场比赛的胜负平都有一个概率<i style="mso-bidi-font-style: normal"><span lang="EN-US">p</span></i><span lang="EN-US">(<i style="mso-bidi-font-style: normal">i</i>, <i style="mso-bidi-font-style: normal">r</i>)</span>。其中，<i style="mso-bidi-font-style: normal"><span lang="EN-US">i</span></i>表示第<i style="mso-bidi-font-style: normal"><span lang="EN-US">i</span></i>场比赛。<i style="mso-bidi-font-style: normal"><span lang="EN-US">r</span></i><span lang="EN-US"> = 0, 1, 2</span>，分别表示比赛结果的（主队）负、平、胜。<i style="mso-bidi-font-style: normal"><span lang="EN-US">p</span></i><span lang="EN-US">(<i style="mso-bidi-font-style: normal">i</i>, <i style="mso-bidi-font-style: normal">r</i>)</span>则表示第<i style="mso-bidi-font-style: normal"><span lang="EN-US">i</span></i>场比赛、结果为<i style="mso-bidi-font-style: normal"><span lang="EN-US">r</span></i>的概率。此外，还有一个概率<i style="mso-bidi-font-style: normal"><span lang="EN-US">q</span></i><span lang="EN-US">(<i style="mso-bidi-font-style: normal">i</i>, <i style="mso-bidi-font-style: normal">r</i>)</span>，表示第<i style="mso-bidi-font-style: normal"><span lang="EN-US">i</span></i>场比赛，投注购买结果为<i style="mso-bidi-font-style: normal"><span lang="EN-US">r</span></i>的概率。</span></span><span style="font-size: 12pt; font-family: 仿宋_GB2312"><span lang="EN-US"><o:p></o:p></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt"><span style="font-size: medium"><span style="font-family: 仿宋_GB2312">例如，如果<i style="mso-bidi-font-style: normal"><span lang="EN-US">q</span></i><span lang="EN-US">(1,0) = 0.5</span>，我们可以知道第一场比赛有<span lang="EN-US">50%</span>的投注会买主队输球。我们假设这<i style="mso-bidi-font-style: normal"><span lang="EN-US">n</span></i>场比赛互不相关，即<i style="mso-bidi-font-style: normal"><span lang="EN-US">p</span></i><span lang="EN-US">(<i style="mso-bidi-font-style: normal">i</i>, <i style="mso-bidi-font-style: normal">r</i>)</span>的结果不会受<i style="mso-bidi-font-style: normal"><span lang="EN-US">p</span></i><span lang="EN-US">(<i style="mso-bidi-font-style: normal">j</i>, <i style="mso-bidi-font-style: normal">r</i></span></span><span lang="EN-US" style="mso-ascii-font-family: 仿宋_GB2312; mso-fareast-font-family: 仿宋_GB2312"><font face="Times New Roman">’</font></span><span lang="EN-US" style="font-family: 仿宋_GB2312">)</span><span style="font-family: 仿宋_GB2312">的影响，<i style="mso-bidi-font-style: normal"><span lang="EN-US">q</span></i><span lang="EN-US">(<i style="mso-bidi-font-style: normal">i</i>, <i style="mso-bidi-font-style: normal">r</i>)</span>的结果也不会受<i style="mso-bidi-font-style: normal"><span lang="EN-US">q</span></i><span lang="EN-US">(<i style="mso-bidi-font-style: normal">j</i>, <i style="mso-bidi-font-style: normal">r</i></span></span><span lang="EN-US" style="mso-ascii-font-family: 仿宋_GB2312; mso-fareast-font-family: 仿宋_GB2312"><font face="Times New Roman">’</font></span><span lang="EN-US" style="font-family: 仿宋_GB2312">)</span><span style="font-family: 仿宋_GB2312">的影响（<i style="mso-bidi-font-style: normal"><span lang="EN-US">r</span></i><span lang="EN-US"> </span></span><span lang="EN-US" style="mso-ascii-font-family: 仿宋_GB2312; mso-fareast-font-family: 仿宋_GB2312"><font face="Times New Roman">≠</font></span><span lang="EN-US" style="font-family: 仿宋_GB2312"> <i style="mso-bidi-font-style: normal">r</i></span><span lang="EN-US" style="mso-ascii-font-family: 仿宋_GB2312; mso-fareast-font-family: 仿宋_GB2312"><font face="Times New Roman">’</font></span><span style="font-family: 仿宋_GB2312">）。</span></span><span style="font-size: 12pt; font-family: 仿宋_GB2312"><span lang="EN-US"><o:p></o:p></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: medium"><span lang="EN-US" style="font-family: 仿宋_GB2312"><span style="mso-spacerun: yes">    </span></span><span style="font-family: 仿宋_GB2312">在这个模型里，我们规定，必须猜中全部<i style="mso-bidi-font-style: normal"><span lang="EN-US">n</span></i>场比赛的结果才能获奖。总奖金为<i style="mso-bidi-font-style: normal"><span lang="EN-US">M</span></i>，由所有获奖的投注平分。<b style="mso-bidi-font-weight: normal">因此，对于一个单式投注<i style="mso-bidi-font-style: normal"><span lang="EN-US">R<sub>i</sub></span></i><span lang="EN-US"> = {<i style="mso-bidi-font-style: normal">r<sub>i</sub></i><sub>1</sub>, <i style="mso-bidi-font-style: normal">r<sub>i</sub></i><sub>2</sub>, </span></b></span><b style="mso-bidi-font-weight: normal"><span lang="EN-US" style="mso-ascii-font-family: 仿宋_GB2312; mso-fareast-font-family: 仿宋_GB2312"><font face="Times New Roman">…</font></span></b><b style="mso-bidi-font-weight: normal"><span lang="EN-US" style="font-family: 仿宋_GB2312">, <i style="mso-bidi-font-style: normal">r<sub>in</sub></i>}</span></b><b style="mso-bidi-font-weight: normal"><span style="font-family: 仿宋_GB2312">，<i style="mso-bidi-font-style: normal"><span lang="EN-US">r<sub>ij</sub></span></i></span></b><span style="font-family: 仿宋_GB2312">表示投注<i style="mso-bidi-font-style: normal"><span lang="EN-US">R<sub>i</sub></span></i>对第<i style="mso-bidi-font-style: normal"><span lang="EN-US">j</span></i>场比赛的预测结果，它的中奖概率为：</span></span><span style="font-size: 12pt; font-family: 仿宋_GB2312"><span lang="EN-US"><o:p></o:p></span></span></p>
<p><img alt="" height="77" src="image/_JudgeOnline_upload_201205_11_jpg" width="202"/></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 12pt; font-family: 仿宋_GB2312">设投注总数为<i style="mso-bidi-font-style: normal"><span lang="EN-US">N</span></i>，那么中奖的投注总数为：<span lang="EN-US"><o:p></o:p></span></span></p>
<p><img alt="" height="80" src="image/_JudgeOnline_upload_201205_22_jpg" width="257"/></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 12pt; font-family: 仿宋_GB2312">于是，投注<i style="mso-bidi-font-style: normal"><span lang="EN-US">R<sub>i</sub></span></i>所能得到的奖金的期望（平均意义下能够获得的奖金数）就是：</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 12pt; font-family: 仿宋_GB2312"><span lang="EN-US"><o:p><img alt="" height="74" src="image/_JudgeOnline_upload_201205_33_jpg" width="171"/></o:p></span></span></p>
<p>
</p><p></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-size: 12pt; font-family: 仿宋_GB2312"><span style="mso-spacerun: yes">    </span></span><span style="font-size: 12pt; font-family: 仿宋_GB2312">以上考虑的仅仅是单式投注的情况，即仅考虑单注<i style="mso-bidi-font-style: normal"><span lang="EN-US">R<sub>i</sub></span></i>的中奖情况。对于复式投注，情况要复杂一些。采用复式投注时，投注的是一个集合<i style="mso-bidi-font-style: normal"><span lang="EN-US">R</span></i><span lang="EN-US"> = {<i style="mso-bidi-font-style: normal">R</i><sub>1</sub>, <i style="mso-bidi-font-style: normal">R</i><sub>2</sub>, </span></span><span lang="EN-US" style="font-size: 12pt; mso-ascii-font-family: 仿宋_GB2312; mso-fareast-font-family: 仿宋_GB2312"><font face="Times New Roman">…</font></span><span lang="EN-US" style="font-size: 12pt; font-family: 仿宋_GB2312">, <i style="mso-bidi-font-style: normal">R<sub>k</sub></i>}</span><span style="font-size: 12pt; font-family: 仿宋_GB2312">，其中<i style="mso-bidi-font-style: normal"><span lang="EN-US">k</span></i>是投注的数量。例如，三场比赛，第一场猜“胜负”，第二场猜“平”，第三场猜“负平”，则<i style="mso-bidi-font-style: normal"><span lang="EN-US">k</span></i><span lang="EN-US"> = 4</span>，<i style="mso-bidi-font-style: normal"><span lang="EN-US">R</span></i>集合如下：</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 12pt; font-family: 仿宋_GB2312"><span lang="EN-US"><o:p><img alt="" height="115" src="image/_JudgeOnline_upload_201205_44_jpg" width="194"/></o:p></span></span></p>
<p><span style="font-size: 12pt; font-family: 仿宋_GB2312"><span lang="EN-US">
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 12pt; font-family: 仿宋_GB2312">复式投注<i style="mso-bidi-font-style: normal"><span lang="EN-US">R</span></i>中，只要有一个<i style="mso-bidi-font-style: normal"><span lang="EN-US">R<sub>i</sub></span></i>猜对所有比赛结果，即可中奖。因此，复式投注<i style="mso-bidi-font-style: normal"><span lang="EN-US">R</span></i>所能获得的奖金的期望就是：<img alt="" height="82" src="image/_JudgeOnline_upload_201205_55_jpg" width="192"/></span></p>
<span style="font-size: 12pt; font-family: 仿宋_GB2312"><span lang="EN-US"><o:p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span style="font-size: 12pt; font-family: 仿宋_GB2312"><span style="mso-spacerun: yes"> </span>我们的问题是，给定<i style="mso-bidi-font-style: normal"><span lang="EN-US">n</span></i>场比赛的信息（胜负平的概率和彩民购买三种结果的概率），以及复式投注中可以购买的最大注数<i style="mso-bidi-font-style: normal"><span lang="EN-US">U</span></i>，要求设计一种复式投注的方案，在不超过最大注数（复式投注的注数<i style="mso-bidi-font-style: normal"><span lang="EN-US">k</span></i><span lang="EN-US"> </span></span><span lang="EN-US" style="font-size: 12pt; mso-ascii-font-family: 仿宋_GB2312; mso-fareast-font-family: 仿宋_GB2312"><font face="Times New Roman">≤</font></span><span lang="EN-US" style="font-size: 12pt; font-family: 仿宋_GB2312"> <i style="mso-bidi-font-style: normal">U</i></span><span style="font-size: 12pt; font-family: 仿宋_GB2312">）的前提下，使得获得奖金的期望最大。<span lang="EN-US"><o:p></o:p></span></span></p>
</o:p></span></span></span></span></p></div><h2>Input</h2><div class="content"><div><span style="font-size: 12pt">第一行四个整数<i>n, N, M, U</i>（<i>n</i>, <i>U</i> </span><span style="font-size: 12pt">≤</span><span style="font-size: 12pt"> 10<sup>4</sup>, <i>N</i>, <i>M</i> </span><span style="font-size: 12pt">≤</span><span style="font-size: 12pt"> 10<sup>9</sup></span><span style="font-size: 12pt">）。</span></div>
<div><span style="font-size: 12pt">    </span><span style="font-size: 12pt">以下<i>n</i>行，每行六个实数。第<i>i</i> + 1行的六个实数为<i>p</i>(<i>i</i>, 0), <i>p</i>(<i>i</i>, 1), <i>p</i>(<i>i</i>, 2), <i>q</i>(<i>i</i>, 0), <i>q</i>(<i>i</i>, 1)和<i>q</i>(<i>i</i>, 2)，用来描述第<i>i</i>场比赛的相关信息。其中，<i>p</i>(<i>i</i>, 0) + <i>p</i>(<i>i</i>, 1) + <i>p</i>(<i>i</i>, 2) = 1, <i>q</i>(<i>i</i>, 0) + <i>q</i>(<i>i</i>, 1) + <i>q</i>(<i>i</i>, 2) = 1, <i>q</i>(<i>i</i>, <i>j</i>) </span><span style="font-size: 12pt">≠</span><span style="font-size: 12pt"> 0</span><span style="font-size: 12pt">。</span></div>
<div> </div></div><h2>Output</h2><div class="content"><div> </div>
<p><img alt="" height="177" src="image/_JudgeOnline_upload_201205_66_jpg" width="447"/></p></div><h2>Sample Input</h2>
<div class="content"><span class="sampledata">1 10 10 1<br/>
0.3 0.2 0.5 0.7 0.2 0.1<br/>
</span></div><h2>Sample Output</h2>
<div class="content"><span class="sampledata">1.609</span></div><h2>HINT</h2>
<div class="content"><p></p></div><h2>Source</h2>
<div class="content"><p><a href="problemset.php?search="></a></p></div><center>[<a href="submitpage.php?id=2767">Submit</a>][<a href="problemstatus.php?id=2767">Status</a>][<a href="bbs.php?id=2767">Discuss</a>]</center>﻿<br/>
<a href="./"><span class="red">HOME</span></a>
<a href="javascript:history.go(-1)"><span class="red">Back</span></a>
<hr/>
<center>
<div class="footer">
<a href="setlang.php?lang=ko">한국어</a> 
		<a href="setlang.php?lang=cn">中文</a> 
		<a href="setlang.php?lang=fa">فارسی</a> 
		<a href="setlang.php?lang=en">English</a> 
		<a href="setlang.php?lang=th">ไทย</a>
<br/> <div>版权所有 ©2008-2012 大视野在线测评 | <a href="http://www.miitbeian.gov.cn">湘ICP备13009380号</a> | <script language="JavaScript" src="http://s21.cnzz.com/stat.php?id=2982771&amp;web_id=2982771"></script>
</div>
<div>Based on opensource project <a href="http://hustoj.googlecode.com">hustoj</a>.</div>
</div>
</center>
</body>
</html>
